// User Service Database Schema
// This is the user management microservice database
// Contains user profiles, friends, and game-related data
// TODO: check if we can use prisma or have to get rid of it

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("USER_DATABASE_URL")
}

// User profile model for user service
// Contains profile data, friends, and game statistics
model UserProfile {
  id          Int      @id @default(autoincrement())
  authUserId  Int      @unique  // References auth-service user ID
  name        String   // Duplicated from auth-service for performance
  email       String   // Duplicated from auth-service for performance
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Profile information
  profilePicture String?  // URL to profile picture
  bio           String?   // User bio/description

  // Friends relationships (many-to-many)
  friends       UserProfile[] @relation("UserFriends")
  friendOf      UserProfile[] @relation("UserFriends")

  // Game data
  matchHistory  Json?     // Game match history (empty object initially)
  stats         Json?     // User statistics (empty object initially)
}
